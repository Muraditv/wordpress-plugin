jQuery(document).ready(function(e){tinymce.create("tinymce.plugins.S3bubbleOembed",{init:function(t,o){t.addButton("s3bubble_oembed_global_shortcode",{title:"S3Bubble",cmd:"s3bubble_oembed_global_shortcode",image:o+"/s3bubbletiny_video_single.png"}),t.addCommand("s3bubble_oembed_global_shortcode",function(){e.post("https://s3api.com/oembed/codes/",{website:s3bubble_oembed_uid.s3website},function(t){if(t.error)swal({title:"Error! "+t.message,text:"Loading...",type:"error",showCancelButton:!1,showConfirmButton:!0,confirmButtonClass:"button button-danger",confirmButtonText:"Ok",closeOnConfirm:!0},function(t){e(".s3bubble-select-group").html()});else{swal({title:"Please select your media below",text:"Loading...",type:"info",showCancelButton:!0,showConfirmButton:!0,confirmButtonClass:"button button-primary",confirmButtonText:"Select",cancelButtonText:"Cancel",closeOnConfirm:!0,closeOnCancel:!0},function(t){if(t){var o=e("#s3bubbleIframeUrl").find("option:selected").attr("id"),n=e("#s3bubbleIframeUrl").find("option:selected").val();tinyMCE.activeEditor.execCommand("mceInsertContent",0,n),setTimeout(function(){swal({title:"You can edit your media in S3Bubble!",text:"Would you like us to open it up in a new tab? Please make sure you are logged in.",type:"info",showCancelButton:!0,confirmButtonClass:"button button-primary",confirmButtonText:"Yes",cancelButtonText:"No",closeOnConfirm:!0,closeOnCancel:!0},function(e){if(e){var t=window.open(o,"_blank");t.focus()}})},1e3)}});var o='<select class="chosen-select" tabindex="1" name="s3bubbleIframeUrl" id="s3bubbleIframeUrl"><option value="">Select Media</option>';e.each(t.results,function(e,t){var n=t.code,s=t.bucket,l=t.key,i=t.title,b=t.ext,u=t.type;"mp4"===b&&(o+='<option id="https://s3bubble.com/secure/#/single_video/'+s+"/"+l.replace(/\//g,"+")+'" value="https://media.s3bubble.com/embed/progressive/id/'+n+'">'+l+"</option>"),"mp3"!==b&&"m4a"!==b||(o+='<option id="https://s3bubble.com/secure/#/single_audio/'+s+"/"+l.replace(/\//g,"+")+'"  value="https://media.s3bubble.com/embed/aprogressive/id/'+n+'">'+l+"</option>"),"m3u8"===b&&(o+='<option id="https://s3bubble.com/secure/#/single_hls/'+s+"/"+l.replace(/\//g,"+")+'"  value="https://media.s3bubble.com/embed/hls/id/'+n+'">'+l+"</option>"),"audio"===u&&(o+='<option id="https://s3bubble.com/secure/#/audio_playlist/'+n+'"  value="https://media.s3bubble.com/embed/aplaylist/id/'+n+'">Audio Playlist: '+i+"</option>"),"video"===u&&(o+='<option id="https://s3bubble.com/secure/#/video_playlist/'+n+'"  value="https://media.s3bubble.com/embed/playlist/id/'+n+'">Video Playlist: '+i+"</option>")}),o+="</select>",e(".s3bubble-select-group").html(o);var n={".chosen-select":{},".chosen-select-deselect":{allow_single_deselect:!0},".chosen-select-no-single":{disable_search_threshold:10},".chosen-select-no-results":{no_results_text:"Oops, nothing found!"},".chosen-select-width":{width:"95%"}};for(var s in n)e(s).chosen(n[s])}},"json")})}}),tinymce.PluginManager.add("S3bubbleOembed",tinymce.plugins.S3bubbleOembed)});