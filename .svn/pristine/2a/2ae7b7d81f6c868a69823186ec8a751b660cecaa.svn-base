jQuery(document).ready(function(e){tinymce.create("tinymce.plugins.S3bubbleOembed",{init:function(t,o){t.addButton("s3bubble_oembed_global_shortcode",{title:"S3Bubble",cmd:"s3bubble_oembed_global_shortcode",image:o+"/s3bubbletiny_video_single.png"}),t.addCommand("s3bubble_oembed_global_shortcode",function(){var t=window.location.host.indexOf("www.")&&window.location.host||window.location.host.replace("www.","");e.post("https://s3bubbleapi.com/plugin/codes",{website:t},function(t){if(t.error)swal({title:"Error! "+t.message,text:"Loading...",type:"error",showCancelButton:!1,showConfirmButton:!0,confirmButtonClass:"button button-danger",confirmButtonText:"Ok",closeOnConfirm:!0},function(t){e(".s3bubble-select-group").html()});else{swal({title:"Please select your media below",text:"Loading...",type:"info",showCancelButton:!0,showConfirmButton:!0,confirmButtonClass:"button button-primary",confirmButtonText:"Select",cancelButtonText:"Cancel",closeOnConfirm:!0,closeOnCancel:!0},function(t){if(t){var o=e("#s3bubbleIframeUrl").find("option:selected").val();tinyMCE.activeEditor.execCommand("mceInsertContent",0,o)}});var o=function(e){if(""===e||void 0===e||e===!1)return null;var t=decodeURIComponent(e);return t=t.replace(/\\/g,"")},n='<select class="chosen-select" tabindex="1" name="s3bubbleIframeUrl" id="s3bubbleIframeUrl"><option value="">Select Media</option>';e.each(t.streams,function(e,t){var l=t.stream,i=t.title?o(t.title):"No Title";n+="<option value='[s3bubble stream=\""+l+"\" /]'>Type: Live, Stream: "+l+", Title: "+i+"</option>"}),e.each(t.playlists,function(e,t){var l=t.code,i=o(t.title),s="audio"===t.type?'type="audio"':"";n+="<option value='[s3bubble code=\""+l+'" '+s+" /]'>Type: Playlist, Code: "+l+", Title: "+i+"</option>"}),e.each(t.media,function(e,t){var l=t.code,i=t.key,s=t.title?o(t.title):i,c="audio"===t.type?'type="audio"':"";n+="<option value='[s3bubble codes=\""+l+'" '+c+" /]'>Type: Media, Code: "+l+", Title: "+s+"</option>"}),n+="</select>",e(".s3bubble-select-group").html(n);var l={".chosen-select":{},".chosen-select-deselect":{allow_single_deselect:!0},".chosen-select-no-single":{disable_search_threshold:10},".chosen-select-no-results":{no_results_text:"Oops, nothing found!"},".chosen-select-width":{width:"95%"}};for(var i in l)e(i).chosen(l[i])}},"json")})}}),tinymce.PluginManager.add("S3bubbleOembed",tinymce.plugins.S3bubbleOembed)});